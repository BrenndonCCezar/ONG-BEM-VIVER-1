<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Campanha | ONG+</title>
  <link rel="stylesheet" href="./css/base.css" />
  <link rel="stylesheet" href="./css/layout.css" />
  <link rel="stylesheet" href="./css/components.css" />
</head>
<body>
<main class="container section">
  <a class="link" href="/projetos.html">← Voltar</a>
  <article id="campanha"></article>
</main>
<script type="module">
  import { getDB } from './js/store.js';
  const params = new URLSearchParams(location.search);
  const id = Number(params.get('id'));
  const db = getDB();
  const p = db.projetos.find(x=>x.id===id) || db.projetos[0];
  const progresso = Math.min(100, Math.round((p.arrecadado/p.meta)*100));
  document.getElementById('campanha').innerHTML = `
    <header><h1>${p.titulo}</h1><span class="badge">${p.categoria}</span></header>
    <img src="${p.imagem}" alt="${p.titulo}" loading="lazy" />
    <p>${p.descricao || 'Campanha para apoiar resgates, cuidados e adoção responsável.'}</p>
    <div style="background:#e5e7eb;border-radius:999px;height:10px;overflow:hidden">
      <div style="width:${progresso}%;height:10px;background:var(--color-primary)"></div>
    </div>
    <small>${progresso}% de R$ ${p.meta.toLocaleString('pt-BR')}</small>
    <div class="hero__actions" style="margin-top:1rem">
      <a class="btn btn--primary" href="/doar.html?projeto=${p.id}">Doar para esta campanha</a>
      <a class="btn btn--ghost" href="/voluntarios.html">Quero ser voluntário</a>
    </div>`;
</script>
</body>
</html>
